<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Performance Report - DF Strategic</title>
    
    <link rel="apple-touch-icon" sizes="180x180" href="https://cdn-icons-png.flaticon.com/512/2910/2910791.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://cdn-icons-png.flaticon.com/512/2910/2910791.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://cdn-icons-png.flaticon.com/512/2910/2910791.png">
    <meta name="theme-color" content="#0f172a">
    <meta name="apple-mobile-web-app-capable" content="yes">

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; color: #0f172a; overflow-x: hidden; }
        input[type="number"]::-webkit-outer-spin-button, input[type="number"]::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
        
        .val-pos { color: #16a34a; font-weight: 700; }
        .val-neg { color: #dc2626; font-weight: 700; }
        .val-zero { color: #64748b; }

        .dashboard-card { background: white; border-radius: 12px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); border: 1px solid #e2e8f0; }
        .result-input { font-weight: 600; transition: all 0.2s; padding-left: 1.2rem; }
        .result-input:focus { transform: scale(1.01); outline: none; border-color: #6366f1; }
        
        #sidebar { transition: transform 0.3s ease-in-out; }
        .sidebar-open { transform: translateX(0); } .sidebar-closed { transform: translateX(-100%); }
        #cloud-status { transition: all 0.5s; }
        .status-saved { color: #16a34a; } .status-saving { color: #f59e0b; } .status-error { color: #dc2626; }
        .account-item:hover { background-color: #334155; } .account-item.active { background-color: #4f46e5; border-left: 4px solid #818cf8; }
        
        @media print { 
            body * { visibility: hidden; } #print-area, #print-area * { visibility: visible; } 
            #print-area { position: absolute; left: 0; top: 0; width: 100%; height: 100%; background: white; z-index: 9999; padding: 0; }
            #sidebar, #header-main, .no-print { display: none !important; } 
        }
    </style>
</head>
<body class="pb-12">

    <div id="app-loader" class="fixed inset-0 bg-slate-900 z-[9999] flex flex-col items-center justify-center text-white transition-opacity duration-700">
        <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500 mb-4"></div>
        <p class="text-sm animate-pulse">Carregando Sistema...</p>
    </div>

    <div id="print-area" class="hidden"></div>
    <div id="sidebar-backdrop" class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden backdrop-blur-sm transition-opacity no-print"></div>
    
    <div id="sidebar" class="fixed inset-y-0 left-0 w-80 bg-slate-900 text-white z-50 sidebar-closed shadow-2xl flex flex-col no-print">
        <div class="p-5 border-b border-slate-700 flex justify-between items-center">
            <div><h2 class="font-bold text-xl">Contas</h2><p class="text-xs text-slate-400">Gerenciamento</p></div>
            <button id="close-sidebar" class="text-slate-400 hover:text-white"><i data-lucide="x"></i></button>
        </div>
        <div class="flex-1 overflow-y-auto p-4 space-y-2" id="account-list"></div>
        <div class="p-4 border-t border-slate-700 bg-slate-800">
            <button id="add-account-btn" class="w-full py-2 bg-indigo-600 hover:bg-indigo-700 rounded-md text-sm font-bold flex items-center justify-center gap-2 transition"><i data-lucide="plus-circle" class="w-4 h-4"></i> Nova Conta</button>
        </div>
    </div>

    <div id="header-main" class="bg-slate-900 text-white py-2 px-4 shadow-md sticky top-0 z-40 flex justify-between items-center no-print">
        <div class="flex items-center gap-3">
            <button id="open-sidebar" class="p-1 hover:bg-slate-700 rounded text-slate-300"><i data-lucide="menu" class="w-6 h-6"></i></button>
            <div class="flex items-center gap-2">
                <div class="bg-indigo-500 p-1 rounded"><i data-lucide="trending-up" class="w-4 h-4"></i></div>
                <span class="font-bold tracking-wide text-sm md:text-base">Performance Report <span class="font-normal text-slate-400">| DF Strategic</span></span>
            </div>
        </div>
        <div class="flex items-center gap-3"><div id="cloud-status" class="text-xs flex items-center gap-1 text-slate-400 font-medium"><i data-lucide="cloud" class="w-3 h-3"></i> <span id="status-text">Conectando...</span></div></div>
    </div>

    <div class="bg-white border-b border-slate-200 shadow-sm sticky top-10 z-30 no-print">
        <div class="container mx-auto px-4 py-3 flex flex-wrap justify-between items-center gap-3">
            <div><h1 id="active-account-name" class="font-bold text-lg leading-none text-slate-800">Carregando...</h1><p class="text-xs text-slate-500 flex items-center gap-1 mt-1"><span id="active-account-config">--</span></p></div>
            <div class="flex gap-2 text-sm">
                <select id="config-size" class="bg-slate-50 border border-slate-300 rounded px-2 py-1 text-slate-700 text-xs outline-none"><option value="25k">25k</option><option value="50k">50k</option><option value="75k">75k</option><option value="100k">100k</option><option value="150k">150k</option><option value="250k">250k</option><option value="300k">300k</option></select>
                <select id="config-month" class="bg-slate-50 border border-slate-300 rounded px-2 py-1 text-slate-700 text-xs outline-none"><option value="1">Mês 1-3</option><option value="4">Mês 4+</option></select>
                <button id="rename-account-btn" class="p-1.5 bg-slate-100 hover: